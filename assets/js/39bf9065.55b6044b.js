"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[6987],{4050:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>o,toc:()=>d});var s=i(5893),r=i(1151);const t={tags:["Proxmox","linux","container","web","self-hosted","lamp","apache","wordpress","wiki"]},l="H\xe9bergement Web avec les CT de PVE",o={id:"Services/ctwebpve",title:"H\xe9bergement Web avec les CT de PVE",description:"Introduction & Pr\xe9requis",source:"@site/docs/Services/ctwebpve.md",sourceDirName:"Services",slug:"/Services/ctwebpve",permalink:"/docs/Services/ctwebpve",draft:!1,unlisted:!1,tags:[{label:"Proxmox",permalink:"/docs/tags/proxmox"},{label:"linux",permalink:"/docs/tags/linux"},{label:"container",permalink:"/docs/tags/container"},{label:"web",permalink:"/docs/tags/web"},{label:"self-hosted",permalink:"/docs/tags/self-hosted"},{label:"lamp",permalink:"/docs/tags/lamp"},{label:"apache",permalink:"/docs/tags/apache"},{label:"wordpress",permalink:"/docs/tags/wordpress"},{label:"wiki",permalink:"/docs/tags/wiki"}],version:"current",frontMatter:{tags:["Proxmox","linux","container","web","self-hosted","lamp","apache","wordpress","wiki"]},sidebar:"docs",previous:{title:"Ligne De Commandes (CLI)",permalink:"/docs/Systems/Windows/LignedeCommande"},next:{title:"Veille Technologique & Cyber S\xe9curit\xe9 avec FreshRSS",permalink:"/docs/Services/freshrss"}},a={},d=[{value:"Introduction &amp; Pr\xe9requis",id:"introduction--pr\xe9requis",level:2},{value:"Pr\xe9requis",id:"pr\xe9requis",level:3},{value:"Cr\xe9ation du Conteneur",id:"cr\xe9ation-du-conteneur",level:2},{value:"Utiliation du Conteneur",id:"utiliation-du-conteneur",level:2},{value:"SSH",id:"ssh",level:3},{value:"Gestions des sauvegardes",id:"gestions-des-sauvegardes",level:3},{value:"Surveillance de votre Conteneur",id:"surveillance-de-votre-conteneur",level:3},{value:"Installation du Doku Wiki",id:"installation-du-doku-wiki",level:2},{value:"Installation du Serveur Web Apache + PHP",id:"installation-du-serveur-web-apache--php",level:3},{value:"Installation Wiki",id:"installation-wiki",level:3},{value:"Configuration WordPress",id:"configuration-wordpress",level:2},{value:"Conclusion",id:"conclusion",level:2}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"h\xe9bergement-web-avec-les-ct-de-pve",children:"H\xe9bergement Web avec les CT de PVE"}),"\n",(0,s.jsx)(n.h2,{id:"introduction--pr\xe9requis",children:"Introduction & Pr\xe9requis"}),"\n",(0,s.jsxs)(n.p,{children:["Bienvenue sur cette documentation.Dans ce guide nous allons installer un serveur Web en utilisant la technologie des conteneurs sur Proxmox.",(0,s.jsx)(n.br,{}),"\n","Dans le but d'h\xe9berger un Wiki & le CMS WordPress pour un futur portfolio."]}),"\n",(0,s.jsx)(n.admonition,{title:"Mise au Point",type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Proxmox VE est une plateforme de virtualisation open-source qui combine la virtualisation de machines (VMs) et la virtualisation par conteneurs dans une interface web conviviale."}),"\n",(0,s.jsx)(n.li,{children:"Nous utiliserons dans ce guide les conteneurs et pas les Machines Virtuelles. Le Conteneur \xe9tant plus l\xe9ger en se basant sur la base de PVE (Debian 12)"}),"\n"]})}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.mdxAdmonitionTitle,{}),(0,s.jsx)(n.p,{children:"Dans ce guide nous nous baserons sur Doku Wiki & WordPress avec un template pr\xe9-configur\xe9 mais n'h\xe9sitez pas \xe0 utiliser un template vierge pour y h\xe9berger vos sites Webs avec un serveur LAMP"})]}),"\n",(0,s.jsx)(n.h3,{id:"pr\xe9requis",children:"Pr\xe9requis"}),"\n",(0,s.jsxs)(n.p,{children:["Pour ce guide vous aurez \xe9videmment besoin d'un serveur Proxmox fonctionnel et \xe0 jour ainsi que le template \xe0 t\xe9l\xe9charger.\nPour le t\xe9l\xe9chargement du template, rendez vous sur votre volume de stockage (local) et selectionnez cliquez sur ",(0,s.jsx)(n.strong,{children:"template"}),".\nCherchez : ",(0,s.jsx)(n.em,{children:"word"}),"\nEt selectionez  ",(0,s.jsx)(n.em,{children:"turnkey-wordpress"}),(0,s.jsx)(n.br,{}),"\n","Illustration en Images :"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"ImagePVECT1",src:i(2107).Z+"",width:"1920",height:"1080"}),"\n",(0,s.jsx)(n.img,{alt:"ImagePVECT2",src:i(1031).Z+"",width:"1920",height:"1080"}),"\n",(0,s.jsxs)(n.em,{children:["Evidemment on clique sur ",(0,s.jsx)(n.strong,{children:"Download"})]})]}),"\n",(0,s.jsx)(n.h2,{id:"cr\xe9ation-du-conteneur",children:"Cr\xe9ation du Conteneur"}),"\n",(0,s.jsxs)(n.p,{children:["Cr\xe9er un conteneur avec le nom que vous voulez tout en vous assurant qu'il respecte les conventions de nommages d\xe9finis dans votre environnement.",(0,s.jsx)(n.br,{}),"\n","D\xe9finissez un Password s\xe9curis\xe9 (Utilisation d'un KeePass)\nEnsuite les param\xe8tres sont les suivants :"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Network : ",(0,s.jsx)(n.em,{children:"en fonction de votre infra"})]}),"\n",(0,s.jsxs)(n.li,{children:["Disque Dur : 10GO ",(0,s.jsx)(n.em,{children:"minimum"})]}),"\n",(0,s.jsxs)(n.li,{children:["RAM : 512MIB ",(0,s.jsx)(n.em,{children:"minimum"})]}),"\n",(0,s.jsxs)(n.li,{children:["DNS : ",(0,s.jsx)(n.em,{children:"en fonction de votre infra"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"ImagePVECT3",src:i(7997).Z+"",width:"1920",height:"873"}),"\n",(0,s.jsx)(n.img,{alt:"ImamePVECT4",src:i(5384).Z+"",width:"1920",height:"1080"})]}),"\n",(0,s.jsxs)(n.p,{children:["Apr\xe8s avoir configur\xe9 votre conteneur v\xe9rifiez le et s\xe9l\xe9ctionnez ",(0,s.jsx)(n.strong,{children:"start after created"}),(0,s.jsx)(n.br,{}),"\n",(0,s.jsx)(n.img,{alt:"ImagePVECT5",src:i(2451).Z+"",width:"896",height:"674"})]}),"\n",(0,s.jsx)(n.h2,{id:"utiliation-du-conteneur",children:"Utiliation du Conteneur"}),"\n",(0,s.jsx)(n.h3,{id:"ssh",children:"SSH"}),"\n",(0,s.jsxs)(n.admonition,{title:"Logiciels SSH",type:"info",children:[(0,s.jsx)(n.p,{children:"Pour prendre la main \xe0 distance sur votre conteneur utliser un logiciel de gestions de connexion SSH :"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Tabby, MobaXTerm, Putty, CMD"}),"\n"]})]}),"\n",(0,s.jsxs)(n.p,{children:["Prenez l'IP de votre conteneur en vous connectant sur la console et avec ",(0,s.jsx)(n.strong,{children:"ip a"}),"\nConnectez vous en SSH apr\xe8s sur le Port 22 (par d\xe9faut) D'ailleurs changez le apr\xe8s pour des questions de s\xe9curit\xe9\n",(0,s.jsx)(n.img,{alt:"ImagePVECT7",src:i(6748).Z+"",width:"1360",height:"589"}),"\n",(0,s.jsx)(n.img,{alt:"ImagePVECT8",src:i(5148).Z+"",width:"1920",height:"1025"})]}),"\n",(0,s.jsxs)(n.admonition,{title:"Prise en Main \xe0 Distance",type:"info",children:[(0,s.jsx)(n.p,{children:"Pour une meilleur utilisation et gestion de votre conteneur l'utilsiationd du SSH est recommand\xe9."}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"En fonction des template l'user Root est utilis\xe9 en ssh ou non. Pour changer cela aller dans /etc/ssh/ et modifier le sshd_config"}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"gestions-des-sauvegardes",children:"Gestions des sauvegardes"}),"\n",(0,s.jsx)(n.admonition,{title:"Les SAUVEGARDES",type:"info",children:(0,s.jsx)(n.p,{children:"Pour centralisez vos sauvegades et les planifier vous pouvez utiliser PBS (Proxmox Backup Server) qui sera parfait pour vos conteneur et VM qui tournent sur PVE."})}),"\n",(0,s.jsx)(n.p,{children:"Pour \xe9viter de perdre votre travail sur vos futurs conteneurs faites des sauvegardes avant chaque changement majeur pour \xeatre s\xfbr de pouvoir revenir en arri\xe8re."}),"\n",(0,s.jsx)(n.h3,{id:"surveillance-de-votre-conteneur",children:"Surveillance de votre Conteneur"}),"\n",(0,s.jsx)(n.p,{children:"Dans le m\xeame principe que les machines virtuelles surveillez r\xe9guli\xe8rement l'utiisation des ressources de votre conteneur."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"ImagePVECT6",src:i(5950).Z+"",width:"1920",height:"890"})}),"\n",(0,s.jsx)(n.h2,{id:"installation-du-doku-wiki",children:"Installation du Doku Wiki"}),"\n",(0,s.jsx)(n.h3,{id:"installation-du-serveur-web-apache--php",children:"Installation du Serveur Web Apache + PHP"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Pour installer Apache & PHP \xe9x\xe9cuter les commandes suivantes :"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"apt update\napt install apache2 libapache2-mod-php php-xml\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Activer le module"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"a2enmod userdir\nsystemctl restart apache2\n"})}),"\n",(0,s.jsxs)(n.admonition,{title:"Premier Test",type:"tip",children:[(0,s.jsx)(n.p,{children:"V\xe9rifier que votre serveur Web est bien en place & accessible."}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Dans votre navigateur : ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"http://MACHINE-IP",children:"http://MACHINE-IP"})})]}),"\n",(0,s.jsx)(n.li,{children:"Vous arrivez sur une page par d\xe9faut de votre Web Server \u2714\ufe0f"}),"\n"]})]}),"\n",(0,s.jsx)(n.h3,{id:"installation-wiki",children:"Installation Wiki"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Placez vous dans le r\xe9pertoire /var/www"}),"\n",(0,s.jsx)(n.li,{children:"T\xe9l\xe9charger l'archive"}),"\n",(0,s.jsx)(n.li,{children:"D\xe9compressez l'archive"}),"\n",(0,s.jsx)(n.li,{children:"Supprimer l'archive"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"cd /var/www\nwget https://download.dokuwiki.org/src/dokuwiki/dokuwiki-stable.tgz\ntar xvf dokuwiki-stable.tgz\nrm dokuwiki-stable.tgz\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Changez le propori\xe9taire"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"chown -R www-data:www-data /var/www/dokuwiki\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\xc9ditez le fichier /etc/apache2/sites-available/000-default.conf, enregistrez le sous dokuwiki.conf"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Editeur Nano",type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Ctrl + S"})," Sauvegarder"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Ctrl + X"})," Quittez l'\xe9diteur"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Ctrl + O"})," Enregistrez sous un autre nom"]}),"\n"]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Decommentez la ligne ServerName et ajoutez votre nom DNS ",(0,s.jsx)(n.code,{children:"wiki_nom.nomdedomaine.local"})," et remplacez la ligne ",(0,s.jsx)(n.code,{children:"DocumentRoot /var/www/html"})," par\n",(0,s.jsx)(n.code,{children:"DocumentRoot /var/www/dokuwiki"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Activez le site du wiki"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"a2ensite dokuwiki.conf\na2dissite wordpress.conf\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Red\xe9mmarez votre service Apache\n",(0,s.jsx)(n.code,{children:"systemctl restart apache2"})]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Test Wiki",type:"tip",children:(0,s.jsx)(n.p,{children:"Pour valider la mise en place de votre Wiki rendez vous sur http://adresse_IP_serveur_wiki/install.php"})}),"\n",(0,s.jsx)(n.admonition,{title:"Fichier PHP",type:"warning",children:(0,s.jsxs)(n.p,{children:["Apr\xe8s avoir installer votre serveur DokuWiki supprimer le ",(0,s.jsx)(n.code,{children:"install.php"})]})}),"\n",(0,s.jsx)(n.h2,{id:"configuration-wordpress",children:"Configuration WordPress"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\xc9ditez le fichier /etc/apache2/sites-available/wordpress.conf, ajoutez la ligne ServerName ",(0,s.jsx)(n.code,{children:"wordpress_nom.nomdedomaine.local"}),", enregistrez."]}),"\n",(0,s.jsx)(n.li,{children:"Activez le site"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"a2ensite wordpress.conf\na2dissite dokuwiki.conf\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Red\xe9mmarez votre service Apache\n",(0,s.jsx)(n.code,{children:"systemctl restart apache2"})]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Test WordPress",type:"tip",children:(0,s.jsxs)(n.p,{children:["Pour valider la mise en place de WordPress",(0,s.jsx)(n.br,{}),"\n","Rendez vous avec votre navigateur sur http://adresse_IP_serveur_wordpress/wp-admin"]})}),"\n",(0,s.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,s.jsx)(n.admonition,{title:"Bien Jou\xe9 ! \u2714\ufe0f",type:"tip",children:(0,s.jsxs)(n.p,{children:["F\xe9licitations ! Vous avez maintenant d\xe9ploy\xe9 avec succ\xe8s un conteneur web sur Proxmox VE.",(0,s.jsx)(n.br,{}),"\n","Avec un Service WordPress & DokuWiki !"]})}),"\n",(0,s.jsx)(n.p,{children:"\ud83d\ude80 Bonne exploration et configuration de votre DokuWiki & WordPress"}),"\n",(0,s.jsx)(n.admonition,{title:"LIENS",type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.dokuwiki.org/dokuwiki",children:"https://www.dokuwiki.org/dokuwiki"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://wordpress.com/fr/",children:"https://wordpress.com/fr/"})}),"\n"]})})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},2107:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pve-ct-web1-fb622246375df5a7996b233eb9b37e9c.png"},1031:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pve-ct-web2-611710faff43fd75bb5923009fea4666.png"},7997:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pve-ct-web3-7776fd06f5fa34ea58009236df0b5fd9.png"},5384:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pve-ct-web4-bdfe87b162afbe36d83adea354071cbe.png"},2451:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pve-ct-web5-1a356c14659c34f94a2c9cf7ff7ba844.png"},5950:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pve-ct-web6-2c9ae624ce9eb39e5d6f84146541174a.png"},6748:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pve-ct-web7-b9db61158e98c57df6bc5077131b8554.png"},5148:(e,n,i)=>{i.d(n,{Z:()=>s});const s=i.p+"assets/images/pve-ct-web8-f99231dd42de94356f131a61cbcfd016.png"},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>l});var s=i(7294);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);